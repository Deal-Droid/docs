---
title: ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö AI ‡πÅ‡∏ö‡∏ö Async
description: ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô AI ‡∏Ç‡∏≠‡∏á DealDroid ‡πÅ‡∏ö‡∏ö asynchronous ‡∏ú‡πà‡∏≤‡∏ô Webhook ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ timeout limit
sidebar:
  order: 2
---

import { Aside } from "@astrojs/starlight/components";

‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ AI ‡∏Ç‡∏≠‡∏á DealDroid ‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏¥‡∏î‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡∏¥‡∏î connect ‡∏£‡∏≠ ‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• AI ‡πÅ‡∏ö‡∏ö background? **Async Answer API** ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á request ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å AI ‡∏ú‡πà‡∏≤‡∏ô Webhook ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á ‚Äî ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î connection ‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î!

---

## ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö

Async Answer API ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ:

- ‚è±Ô∏è **‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î timeout ‡∏™‡∏±‡πâ‡∏ô‡πÜ** ‚Äî Webhook receivers, Serverless functions, ‡∏´‡∏£‡∏∑‡∏≠ API ‡∏ó‡∏µ‡πà‡∏°‡∏µ timeout limit
- üì¨ **‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ queue request** ‚Äî ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ load ‡πÅ‡∏•‡∏∞ rate limiting
- üöÄ **Integration ‡πÅ‡∏ö‡∏ö fire-and-forget** ‚Äî ‡∏™‡πà‡∏á request ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏ó‡∏≤‡∏á webhook
- üîÑ **Background processing** ‚Äî ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• AI ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà block ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠ response

---

## ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö Sync vs Async

| Feature             | [Sync](/th/thirdparty/endpoint/#6-get-droid-answer) | Async (‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ)                 |
| ------------------- | --------------------------------------------------- | ------------------------------- |
| Response time       | 2-180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡∏£‡∏≠ AI ‡∏ï‡∏≠‡∏ö)                            | < 100ms (acknowledge ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)     |
| AI Response         | ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô HTTP response                                | ‡∏™‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô Webhook                 |
| ‡∏ï‡πâ‡∏≠‡∏á config Webhook | ‚ùå ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á                                          | ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤                  |
| Use case            | Real-time chat, ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ                   | Background processing, queuing  |
| Timeout handling    | ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤ AI ‡∏à‡∏∞‡∏ï‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à                          | Return ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ timeout |

> **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô‡∏î‡∏µ?** ‡∏ñ‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏£‡∏≠‡πÑ‡∏î‡πâ 2-180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÉ‡∏ä‡πâ [Sync version](/th/thirdparty/endpoint/#6-get-droid-answer) ‡∏à‡∏∞‡∏á‡πà‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤ ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏°‡∏µ timeout limit ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ queue ‡∏£‡∏∞‡∏ö‡∏ö ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Async version

---

## ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Sync ‡πÅ‡∏•‡∏∞ Async ‡∏°‡∏≤‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡πÅ‡∏ö‡∏ö:

### Synchronous (‡πÅ‡∏ö‡∏ö‡∏£‡∏≠‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö)

```
Third Party ‚Üí DealDroid API
              ‚è≥ ‡∏£‡∏≠ AI ‡∏Ñ‡∏¥‡∏î (2-180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
              ‚úÖ ‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
Third Party ‚Üê ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å AI
```

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**

1. Third Party ‡∏™‡πà‡∏á request ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
2. **‡∏£‡∏≠** ‡πÉ‡∏´‡πâ AI ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• (2-180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
3. ‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏û‡∏£‡πâ‡∏≠‡∏° HTTP response

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:** ‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÉ‡∏ô response ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß  
**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢:** ‡∏ñ‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á timeout ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ request ‡∏≠‡∏≤‡∏à timeout ‡πÑ‡∏î‡πâ

---

### Asynchronous (‡πÅ‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡∏ú‡πà‡∏≤‡∏ô Webhook)

```
Third Party ‚Üí DealDroid API
              ‚úÖ ‡πÑ‡∏î‡πâ requestId ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (< 100ms)
Third Party ‚Üê requestId

              ... AI ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÉ‡∏ô background (2-180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) ...

Third Party ‚Üê Webhook: ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏° requestId
   Webhook
```

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**

1. Third Party ‡∏™‡πà‡∏á request ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
2. ‡πÑ‡∏î‡πâ `requestId` ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤**‡∏ó‡∏±‡∏ô‡∏ó‡∏µ** (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠ AI)
3. AI ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÉ‡∏ô background
4. ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡πà‡∏á **webhook** ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡∏∞ `requestId` ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ
5. Third Party match `requestId` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á request ‡πÑ‡∏´‡∏ô

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:** ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ timeout, ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö queue ‡πÑ‡∏î‡πâ  
**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢:** ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ webhook endpoint ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ async flow

---

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (Configuration)

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤ Integrations

![‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Integration ‡πÅ‡∏™‡∏î‡∏á‡∏™‡πà‡∏ß‡∏ô When AI Answer Ready](@/assets/third-party/integration_th.png)

‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠:

1. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î DealDroid ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Settings > ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å** (Integrations)

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ "When AI Answer Ready"

‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô **"When AI Answer Ready"** ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏û‡∏ö‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ webhook:

#### Webhook URL (Required)

URL ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á AI response ‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**

```
https://your-server.com/answer-webhook
```

**‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î:**

- ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô HTTPS URL (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production)
- ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏±‡∏ö HTTP POST request
- ‡∏ï‡πâ‡∏≠‡∏á return HTTP 2xx ‡πÄ‡∏û‡∏∑‡πà‡∏≠ acknowledge (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ 200 OK)
- ‡∏Ñ‡∏ß‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

**‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:**

- ‡πÉ‡∏ä‡πâ [webhook.site](https://webhook.site) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ URL ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà localhost)
- ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ ngrok ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö local development

---

#### Webhook Secret (Optional)

Secret key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö verify ‡∏ß‡πà‡∏≤ request ‡∏°‡∏≤‡∏à‡∏≤‡∏Å DealDroid ‡∏à‡∏£‡∏¥‡∏á

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:** `your_secure_secret_key_2026`

**‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î:**

- ‡πÉ‡∏ä‡πâ random string ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 32 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
- ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô environment variable ‡∏ö‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
- ‡∏≠‡∏¢‡πà‡∏≤ commit ‡∏•‡∏á version control
- ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

**‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:** ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ append secret ‡πÄ‡∏õ‡πá‡∏ô query parameter:

```
https://your-server.com/answer-webhook?secret=your-secret-here
```

> **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡πÅ‡∏°‡πâ secret ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô optional ‡πÅ‡∏ï‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Webhook

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏≠‡∏Å Webhook URL ‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ:

1. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° **"Send Test Answer"**
2. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á test payload ‡πÑ‡∏õ‡∏¢‡∏±‡∏á webhook URL ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ webhook ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö request ‡πÅ‡∏•‡∏∞ return 200 OK

<Aside type="tip">
  ‡πÉ‡∏ä‡πâ [webhook.site](https://webhook.site) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π payload ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á
  endpoint ‡∏à‡∏£‡∏¥‡∏á
</Aside>

---

## API Reference

### Endpoint

```
POST /api/droids/:droidId/endpoint/get-droid-answer-async
```

‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà `:droidId` ‡∏î‡πâ‡∏ß‡∏¢ Droid ID ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

---

### Authentication

‡πÉ‡∏ä‡πâ Third Party API Key ‡πÉ‡∏ô Authorization header:

```
Authorization: Bearer {your-api-key}
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏≤ API Key:** ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Automation Panel > "When Receive message from Third Party" ‚Üí ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Bearer token

---

### Request Body

```json
{
  "humanMessage": {
    "content": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏£‡∏±‡∏ö",
    "type": "human"
  },
  "chatHistory": [
    {
      "content": "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö",
      "type": "human"
    },
    {
      "content": "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏∞ ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞?",
      "type": "ai"
    }
  ]
}
```

#### ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå

| Field                | Type   | Required | Description                                            |
| -------------------- | ------ | -------- | ------------------------------------------------------ |
| humanMessage         | object | ‚úÖ Yes   | ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ                                       |
| humanMessage.content | string | ‚úÖ Yes   | ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°                                         |
| humanMessage.type    | string | ‚ùå No    | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (default: "human")                       |
| chatHistory          | array  | ‚ùå No    | ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ö‡∏£‡∏¥‡∏ö‡∏ó‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô |

---

### Immediate Response

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö request (‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 100ms):

```json
{
  "success": true,
  "requestId": "tpa-cm5xyz123abc456def",
  "message": "Answer request queued. Response will be sent to your configured webhook."
}
```

#### Response Fields

| Field     | Type    | Description                                                |
| --------- | ------- | ---------------------------------------------------------- |
| success   | boolean | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö request                                        |
| requestId | string  | ID ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö track request (‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ `tpa-`)               |
| message   | string  | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ request ‡∏ñ‡∏π‡∏Å queue ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏™‡πà‡∏á webhook ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ |

<Aside>
  ‡πÄ‡∏Å‡πá‡∏ö `requestId` ‡πÑ‡∏ß‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ match ‡∏Å‡∏±‡∏ö webhook response ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á
</Aside>

---

### Error Responses

#### 400 Bad Request - Webhook ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

```json
{
  "error": "Bad Request",
  "message": "thirdPartyAnswerWebhook is not configured. Please set up the webhook URL in Settings > Integrations before using async answer endpoint."
}
```

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡πÑ‡∏õ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Webhook URL ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Settings > Integrations ‡∏Å‡πà‡∏≠‡∏ô

---

#### 400 Bad Request - ‡πÑ‡∏°‡πà‡∏°‡∏µ Test Customer

```json
{
  "error": "Bad Request",
  "message": "Droid Missing Test Customer Id"
}
```

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Droid ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ Test Customer ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ

---

#### 400 Bad Request - ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö message ‡∏ú‡∏¥‡∏î

```json
{
  "error": "Bad Request",
  "message": "Invalid humanMessage format"
}
```

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ `humanMessage` ‡∏°‡∏µ `content` field ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô string

---

#### 401 Unauthorized - API Key ‡∏ú‡∏¥‡∏î

```json
{
  "error": "Unauthorized",
  "message": "Invalid API key"
}
```

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Bearer token ‡πÉ‡∏ô Authorization header

---

## ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö Webhook Response

‡πÄ‡∏°‡∏∑‡πà‡∏≠ AI ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à (‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ 2-180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á POST request ‡πÑ‡∏õ‡∏¢‡∏±‡∏á webhook URL ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î

### Success Response

```json
{
  "requestId": "tpa-d5cacv27v60xfhlqpap1gm76",
  "droidId": 5,
  "customerId": 5,
  "responses": [
    {
      "lc": 1,
      "type": "constructor",
      "id": ["langchain_core", "messages", "AIMessage"],
      "kwargs": {
        "content": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤ 599 ‡∏ö‡∏≤‡∏ó‡∏Ñ‡∏£‡∏±‡∏ö ‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏•‡∏î 10% ‡∏ñ‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠ 2 ‡∏ä‡∏¥‡πâ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏Ñ‡∏£‡∏±‡∏ö",
        "additional_kwargs": {},
        "tool_calls": [],
        "invalid_tool_calls": [],
        "response_metadata": {}
      }
    }
  ],
  "addressParsing": {
    "street_address": "",
    "subdistrict": "",
    "district": "",
    "city": "",
    "postal_code": "",
    "country": ""
  },
  "customerInsight": {
    "forbidden_topics": "no",
    "user_intent": "‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",
    "intents": ["product_inquiry"],
    "product_keyword": [],
    "user_language": "Thai",
    "contact_info": {
      "name": "",
      "phone": "",
      "email": ""
    },
    "has_extractable_info": false
  },
  "shoppingCart": {
    "products": [],
    "shippingFee": "10",
    "grandTotal": "0.00 THB"
  },
  "customExtractedInfo": {},
  "answer": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤ 599 ‡∏ö‡∏≤‡∏ó‡∏Ñ‡∏£‡∏±‡∏ö ‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏•‡∏î 10% ‡∏ñ‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠ 2 ‡∏ä‡∏¥‡πâ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏Ñ‡∏£‡∏±‡∏ö",
  "intents": ["product_inquiry"],
  "executionTime": 13301,
  "timestamp": "2026-02-11T03:20:24.267Z"
}
```

#### Webhook Payload Fields

| Field               | Type     | Description                                                         |
| ------------------- | -------- | ------------------------------------------------------------------- |
| requestId           | string   | ID ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ï‡∏≠‡∏ô submit request (‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö match)                    |
| droidId             | number   | ID ‡∏Ç‡∏≠‡∏á Droid ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•                                            |
| customerId          | number   | ID ‡∏Ç‡∏≠‡∏á Customer (Test Customer)                                     |
| responses           | array    | ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å AI ‡πÅ‡∏ö‡∏ö‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° paragraph (‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∏‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà `kwargs.content`) |
| addressParsing      | object   | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏Å‡∏±‡∏î‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)                                     |
| customerInsight     | object   | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• insight ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (intent, language, contact info)           |
| shoppingCart        | object   | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤                                                  |
| customExtractedInfo | object   | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏Å‡∏±‡∏î‡∏ï‡∏≤‡∏° Custom Extraction ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ                    |
| answer              | string   | **‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å AI ‡πÅ‡∏ö‡∏ö raw text** (‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)                     |
| intents             | string[] | Intent ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö                                             |
| executionTime       | number   | ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• (milliseconds)                              |
| timestamp           | string   | ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á response (ISO 8601 format)                               |

> **üí° Tip:** ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‡πÉ‡∏ä‡πâ field `answer` ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∏‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô `responses` array

---

### Error Response

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•:

```json
{
  "requestId": "tpa-cm5xyz123abc456def",
  "droidId": 42,
  "customerId": 100,
  "answer": "",
  "error": "Failed to generate AI response: timeout",
  "executionTime": 30000,
  "timestamp": "2026-02-07T10:30:30.000Z"
}
```

#### Error Response Fields

| Field  | Type   | Description                                |
| ------ | ------ | ------------------------------------------ |
| error  | string | ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° error (‡∏°‡∏µ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î) |
| answer | string | ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô empty string ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î error        |

> **‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ error:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ field `error` ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡πÉ‡∏´‡πâ retry ‡∏´‡∏£‡∏∑‡∏≠ log ‡πÄ‡∏û‡∏∑‡πà‡∏≠ debug

---

### Webhook URL Format (‡∏Å‡∏±‡∏ö Secret)

‡∏ñ‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ secret ‡πÑ‡∏ß‡πâ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ append ‡πÄ‡∏õ‡πá‡∏ô query parameter:

```
POST https://your-server.com/answer-webhook?secret=your-secret-here
```

**‡∏ß‡∏¥‡∏ò‡∏µ verify:**

```javascript
// Express.js example
app.post("/answer-webhook", (req, res) => {
  const { secret } = req.query;

  if (secret !== process.env.DEALDROID_WEBHOOK_SECRET) {
    return res.status(401).json({ error: "Invalid secret" });
  }

  // Process webhook...
});
```

---

## ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö (Testing Guide)

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ webhook.site

[webhook.site](https://webhook.site) ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ü‡∏£‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏î‡∏π webhook request

#### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:

1. **‡πÄ‡∏õ‡∏¥‡∏î https://webhook.site**

   ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á unique URL ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÄ‡∏ä‡πà‡∏ô:

   ```
   https://webhook.site/abc12345-1234-5678-abcd-1234567890ab
   ```

2. **Copy URL ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô DealDroid**
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Settings > Integrations
   - ‡∏ß‡∏≤‡∏á URL ‡πÉ‡∏ô "When AI Answer Ready" > Webhook URL
   - ‡∏Ñ‡∏•‡∏¥‡∏Å Save

3. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏∏‡πà‡∏° "Send Test Answer"**
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏ô UI
   - ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡∏π‡∏ó‡∏µ‡πà webhook.site ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô request ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö payload ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö

4. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ API ‡∏à‡∏£‡∏¥‡∏á**

   ```bash
   curl -X POST "https://your-domain.com/api/droids/123/endpoint/get-droid-answer-async" \
     -H "Authorization: Bearer YOUR_API_KEY" \
     -H "Content-Type: application/json" \
     -d '{
       "humanMessage": {
         "content": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡∏ö"
       }
     }'
   ```

5. **‡∏£‡∏≠‡∏î‡∏π AI response ‡∏ó‡∏µ‡πà webhook.site**
   - ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2-180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
   - ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô POST request ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
   - ‡∏î‡∏π JSON payload ‡∏ó‡∏µ‡πà‡∏°‡∏µ `answer`, `intents`, `executionTime`

---

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ cURL (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö developers)

#### Request ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô:

```bash
curl -X POST "https://your-domain.com/api/droids/123/endpoint/get-droid-answer-async" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "humanMessage": {
      "content": "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö"
    }
  }'
```

#### Request ‡∏û‡∏£‡πâ‡∏≠‡∏° chat history:

```bash
curl -X POST "https://your-domain.com/api/droids/123/endpoint/get-droid-answer-async" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "humanMessage": {
      "content": "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà"
    },
    "chatHistory": [
      {"content": "‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á", "type": "human"},
      {"content": "‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ A, B, C ‡∏Ñ‡∏£‡∏±‡∏ö", "type": "ai"}
    ]
  }'
```

#### Response ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ (‡∏ó‡∏±‡∏ô‡∏ó‡∏µ):

```json
{
  "success": true,
  "requestId": "tpa-cm5xyz123abc456def",
  "message": "Answer request queued. Response will be sent to your configured webhook."
}
```

---

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: Debug Webhooks Page

![‡∏´‡∏ô‡πâ‡∏≤ Debug Webhooks ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î webhook ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ](@/assets/third-party/webhook-debug.png)

‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á webhook ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà:

```
/droids/{droidId}/debug/webhooks
```

**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á:**

- ‚úÖ Webhook URL ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ
- ‚úÖ HTTP Status ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö (200, 404, 500, etc.)
- ‚úÖ Request payload ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ
- ‚úÖ Response body ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤
- ‚úÖ Response time (‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ)
- ‚úÖ Error message (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
- ‚úÖ Timestamp ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ request

**‡∏Å‡∏£‡∏ì‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**

- Debug ‡πÄ‡∏°‡∏∑‡πà‡∏≠ webhook ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö payload ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏à‡∏£‡∏¥‡∏á
- ‡∏î‡∏π error message ‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
- ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ webhook ‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á

---

### ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

#### 1. Return 200 ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‚ö°

```javascript
// ‚úÖ ‡∏î‡∏µ - Return ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ process
res.status(200).json({ received: true });
setImmediate(() => processAnswer(data));

// ‚ùå ‡πÑ‡∏°‡πà‡∏î‡∏µ - Process ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ return (‡∏ä‡πâ‡∏≤)
await processAnswer(data);
res.status(200).json({ received: true });
```

**‡∏ó‡∏≥‡πÑ‡∏°?** ‡∏ñ‡πâ‡∏≤ webhook ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô DealDroid ‡∏≠‡∏≤‡∏à timeout ‡πÅ‡∏•‡∏∞ retry ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥

#### 2. Verify Secret ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á üîí

```javascript
// ‚úÖ ‡∏î‡∏µ - Verify ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£
if (secret !== process.env.DEALDROID_WEBHOOK_SECRET) {
  return res.status(401).json({ error: "Invalid secret" });
}

// ‚ùå ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ - ‡πÑ‡∏°‡πà verify (‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏î‡πâ)
// ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö secret
```

**‡∏ó‡∏≥‡πÑ‡∏°?** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏™‡πà‡∏á fake webhook ‡∏°‡∏≤

#### 3. ‡πÉ‡∏ä‡πâ requestId ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Deduplicate üîÑ

```javascript
// ‚úÖ ‡∏î‡∏µ - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏¢ process ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
const exists = await db.webhooks.findOne({ requestId });
if (exists) {
  console.log(`[${requestId}] Already processed, skipping`);
  return res.status(200).json({ received: true, duplicate: true });
}

await db.webhooks.create({ requestId, answer, processedAt: new Date() });
```

**‡∏ó‡∏≥‡πÑ‡∏°?** ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î retry webhook ‡∏≠‡∏≤‡∏à‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥ ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ process ‡∏ã‡πâ‡∏≥

---

## Webhook Log Retention (‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ Webhook)

### ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

- Webhook logs ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ **7 ‡∏ß‡∏±‡∏ô**
- ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 7 ‡∏ß‡∏±‡∏ô logs ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ cleanup ‡∏î‡πâ‡∏ß‡∏¢ scheduled command

### ‡∏Å‡∏≤‡∏£‡∏î‡∏π Logs

‡∏î‡∏π webhook logs ‡πÑ‡∏î‡πâ 2 ‡∏ó‡∏≤‡∏á:

1. **‡∏´‡∏ô‡πâ‡∏≤ Debug Webhooks** - `/droids/{droidId}/debug/webhooks`
   - ‡πÅ‡∏™‡∏î‡∏á request/response ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
   - Filter ‡∏ï‡∏≤‡∏° status, date range
   - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞ webhook

2. **Server Logs** - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö admin
   - ‡πÉ‡∏ä‡πâ command: `node ace cleanup:webhook-logs` (manual)
   - Cron job ‡∏£‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô

### Best Practices ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Logging

- **‡πÄ‡∏Å‡πá‡∏ö log ‡πÉ‡∏ô‡∏ù‡∏±‡πà‡∏á‡∏Ñ‡∏∏‡∏ì‡∏î‡πâ‡∏ß‡∏¢** - ‡∏≠‡∏¢‡πà‡∏≤‡∏û‡∏∂‡πà‡∏á DealDroid logs ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- **Export ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç** - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ webhook ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏´‡πâ export ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ
- **Track requestId** - ‡πÉ‡∏ä‡πâ requestId ‡πÄ‡∏û‡∏∑‡πà‡∏≠ match ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

---

## ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢ (FAQ)

### Q: ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Async ‡πÅ‡∏ó‡∏ô Sync?

**A:** ‡πÉ‡∏ä‡πâ Async ‡πÄ‡∏°‡∏∑‡πà‡∏≠:

- ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ timeout ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡πÄ‡∏ä‡πà‡∏ô Serverless functions)
- ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ queue requests ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ load
- ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ fire-and-forget pattern (‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ï‡πà‡∏≠)

‡∏ñ‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏£‡∏≠‡πÑ‡∏î‡πâ‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÉ‡∏ä‡πâ [Sync version](/th/thirdparty/endpoint/#6-get-droid-answer) ‡∏à‡∏∞‡∏á‡πà‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤

---

### Q: Webhook URL ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô HTTPS ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠?

**A:** ‡πÉ‡∏ä‡πà ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô HTTPS ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏Å‡πá‡∏ï‡∏≤‡∏° ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô development ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ:

- **[webhook.site](https://webhook.site)** (HTTPS ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
- **ngrok** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö tunnel localhost (‡πÉ‡∏´‡πâ HTTPS URL)

---

### Q: ‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏ñ‡πâ‡∏≤ webhook ‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö 200 OK?

**A:** DealDroid ‡∏à‡∏∞ retry ‡∏™‡πà‡∏á webhook ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏ï‡∏≤‡∏° retry policy) ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô failed log ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Debug Webhooks

**Tips:** ‡πÉ‡∏´‡πâ webhook ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì return 200 OK ‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1-2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ process ‡πÉ‡∏ô background

---

### Q: ‡∏ú‡∏°‡∏à‡∏∞‡∏£‡∏π‡πâ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏ß‡πà‡∏≤ webhook ‡∏°‡∏≤‡∏à‡∏≤‡∏Å DealDroid ‡∏à‡∏£‡∏¥‡∏á?

**A:** ‡πÉ‡∏ä‡πâ **Webhook Secret** ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô query parameter `?secret=your-secret` ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö secret ‡∏ô‡∏µ‡πâ‡∏ö‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏™‡∏≠:

```javascript
if (req.query.secret !== process.env.DEALDROID_WEBHOOK_SECRET) {
  return res.status(401).json({ error: "Invalid secret" });
}
```

---

### Q: Webhook ‡∏≠‡∏≤‡∏à‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?

**A:** ‡πÑ‡∏î‡πâ ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà:

- Webhook ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà return 200 OK
- ‡πÄ‡∏Å‡∏¥‡∏î network timeout
- DealDroid retry ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å error

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡πÉ‡∏ä‡πâ `requestId` ‡πÄ‡∏û‡∏∑‡πà‡∏≠ deduplicate - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ requestId ‡∏ô‡∏µ‡πâ‡πÄ‡∏Ñ‡∏¢ process ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏¢ process ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ skip

---

### Q: AI ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö?

**A:** ‡πÇ‡∏î‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ **10-180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ** ‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö:

- ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
- ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á chat history
- Load ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö AI ‡∏Ç‡∏ì‡∏∞‡∏ô‡∏±‡πâ‡∏ô

‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å field `executionTime` ‡πÉ‡∏ô webhook response (‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏õ‡πá‡∏ô milliseconds)

---

### Q: ‡∏ú‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ webhook endpoint ‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°?

**A:** ‡πÑ‡∏î‡πâ! ‡πÉ‡∏ä‡πâ [webhook.site](https://webhook.site):

1. ‡πÄ‡∏õ‡∏¥‡∏î webhook.site -> ‡πÑ‡∏î‡πâ unique URL
2. Copy URL ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô Settings > Integrations
3. ‡∏™‡πà‡∏á request ‡πÑ‡∏õ‡∏ó‡∏µ‡πà API
4. ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡∏π webhook.site ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô payload ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤

---

### Q: ‡∏ú‡∏°‡∏à‡∏∞‡∏î‡∏π log ‡∏Ç‡∏≠‡∏á webhook ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô?

**A:** ‡∏°‡∏µ 2 ‡∏ß‡∏¥‡∏ò‡∏µ:

**1. ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Integrations (‡∏ó‡∏≤‡∏á‡∏•‡∏±‡∏î)**

![Link ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Debug Webhooks ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Integration](@/assets/third-party/webhook-debug-link.png)

‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà link "‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á webhook" ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Settings > Integrations ‡∏™‡πà‡∏ß‡∏ô "When AI Answer Ready"

**2. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤ Debug Webhooks ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á**

‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/droids/{droidId}/debug/webhooks`

**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô:**

- ‡∏ó‡∏∏‡∏Å webhook ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ (7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)
- HTTP status ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö
- Request/Response payload
- Error message (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
- Response time

---

### Q: ‡∏ú‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô webhook URL ‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°?

**A:** ‡πÑ‡∏î‡πâ ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Settings > Integrations ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Webhook URL ‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏£:

1. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL ‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏∏‡πà‡∏° "Send Test Answer" ‡∏Å‡πà‡∏≠‡∏ô
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ URL ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï
3. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï secret (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á)

---

### Q: ‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏ñ‡πâ‡∏≤ API Key ‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡∏ñ‡∏π‡∏Å‡πÇ‡∏à‡∏£‡∏Å‡∏£‡∏£‡∏°?

**A:** ‡∏™‡∏£‡πâ‡∏≤‡∏á API Key ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà:

1. ‡πÄ‡∏õ‡∏¥‡∏î **Automation Panel**
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà "When Receive message from Third Party"
3. ‡∏Ñ‡∏•‡∏¥‡∏Å **Regenerate** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á token ‡πÉ‡∏´‡∏°‡πà
4. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏î‡πâ‡∏ß‡∏¢ token ‡πÉ‡∏´‡∏°‡πà

‚ö†Ô∏è **‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:** Token ‡πÄ‡∏Å‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà

---

## ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô! üéâ

**‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ Async Answer API ‡πÅ‡∏•‡πâ‡∏ß!**

‡∏î‡πâ‡∏ß‡∏¢ Async Answer API ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ:

- ‚úÖ ‡πÉ‡∏ä‡πâ AI ‡∏Ç‡∏≠‡∏á DealDroid ‡πÅ‡∏°‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏µ timeout ‡∏™‡∏±‡πâ‡∏ô
- ‚úÖ Queue requests ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ load ‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô
- ‚úÖ ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• AI ‡πÅ‡∏ö‡∏ö background ‡πÑ‡∏°‡πà block system
- ‚úÖ Track ‡πÅ‡∏•‡∏∞ debug ‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Debug Webhooks

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ:**

1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Webhook URL ‡πÉ‡∏ô Settings > Integrations
2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ webhook.site
3. ‡∏™‡∏£‡πâ‡∏≤‡∏á webhook receiver ‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á Best Practices
4. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡πà‡∏á request ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏£‡∏±‡∏ö AI response!

‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡πÄ‡∏£‡∏≤‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏Ñ‡∏∏‡∏ì! üòä
